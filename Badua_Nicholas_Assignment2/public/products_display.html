<script>

    /*
    Author: Nicholas Badua
    Date: 18 November 2021
    Description: This is the code for the products display page containing all the products along with their prices and inventory stock amounts.
    */
    
    </script>

<script src="./products_data.js" type="text/javascript"></script> 

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/products_display.css">
    <title>Nick's Tennis Shop Products</title>
    
</head>
<body>
    <script>//Adapted from https://www.w3schools.com/howto/howto_css_fixed_menu.asp</script>
    <div class="navbar">
        <a href="#contact">Login</a>
      </div>
    <div class= container>
        <div class="header">
                <strong>Nick's Tennis Shop</strong>
        </div>
        <div class="content-large">
            <form action="./purchase" method="POST">
                <main>
                    <script>
    for (i = 0; i < products_array.length; i++) { //Uses a loop that creates the products on the page in a consistent format. Based off of previous work done on SmartPhoneProducts3.
                        document.write(`
                            <div class= "product_slot">
                                <img src = ./images/${products_array[i].image}> 
                                <div class="item_properties">
                                <h2>${products_array[i].name}</h2>
                                <p> Currently Stocked: ${products_array[i].quantity_available}
                                <p>$${products_array[i].price.toFixed(2)} USD</p>
                                <label>Qty:</label>
                                <input type="text" placeholder=0 name="quantity${i}" size="1">
                                <br>
                                </div>
                            </div>

                        `); 
                    };

                    </script>
                </main>
                <h3>Ready to Purchase?</h3>
            <div class="purchase_button">
                <input type="submit" value="Place Order">
            </div>  
            </form>
        </div>

        <div class="footer">

                    <h5>
                        <b>SHIPPING POLICY:</b>
                        <br>Domestic Flat Rate Shipping Fee is $5.99 
                        <br>Free Shipping For Orders Over $100.00 
                    </h5>
        </div>
    </div>
</body>

<script>
    let params = (new URL(document.location)).searchParams; //Puts the url into the params variable. Used (later) to get information from the query string.

    if (params.get("error") == "true") { //If there is an "error=true" in the url query, then give an alert saying that they need to put a postive whole number.
        alert("Oops! Invalid input for " + params.get("item").replace(/_/g, " ") + ". Please insert a postive whole number."); //Code adapted from here: https://www.tutorialrepublic.com/faq/how-to-replace-character-inside-a-string-in-javascript.php
    };
    if (params.get("error") == "true_not_enough_in_inventory") { //If there is an "error=true_not_enough_in_inventory" in the url query, then give an alert saying they input a value more than what we have currently stocked.
        alert("Oh no! Not enough "+ params.get("item").replace(/_/g, " ") + " in stock. Sorry for the inconvenience.");
    };
    if (params.get("error") == "true_no_items_were_selected") {//If there is an "error=true_no_items_were_selected" in the url query, then give an alert that says they didn't select any items.
        alert("Silly Goose! Please select some items :)");
    };

</script>

</html>