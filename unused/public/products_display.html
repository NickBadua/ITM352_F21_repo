<script>

    /*
    Author: Nicholas Badua
    Date: 16 November 2021
    Description: This client page consists of the code for the order page with all the products and prices. 
    */
    
    </script>

<script src="./products_data.js" type="text/javascript"></script> 

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/page_copy.css">
    <title>Nick's Tennis Shop Products</title>
    
</head>
<body>
    <div class= container>
        <div class="header">
                <strong>Nick's Tennis Shop</strong>
        </div>
        <div class="content-large">
            <form action="./purchase" method="POST">
                <main>
                    <script>
    for (i = 0; i < products_array.length; i++) { //Uses a loop that creates the products on the page in a consistent format. Based off of previous work done on SmartPhoneProducts3.
                        document.write(`
                            <div class= "product_slot">
                                <img src = ./images/${products_array[i].image}> 
                                <div class="item_properties">
                                <h2>${products_array[i].name}</h2>
                                <p> Currently Stocked: ${products_array[i].quantity_available}
                                <p>$${products_array[i].price.toFixed(2)} USD</p>
                                <label>Qty:</label>
                                <input type="text" placeholder=0 name="quantity${i}" size="1">
                                <br>
                                </div>
                            </div>

                        `); 
                    };

                    </script>
                </main>
                <h3>Ready to Purchase?</h3>
            <div class="purchase_button">
                <input type="submit" value="Place Order">
            </div>  
            </form>
        </div>

        <div class="footer">

                    <h5>
                        <b>SHIPPING POLICY:</b>
                        <br>Orders under $20 will have no shipping fees
                        <br>Orders $20-$100 have a $5.99 shipping fee
                        <br>Orders over $100 will be charged 3% of the subtotal amount<br> 
                    </h5>
        </div>
    </div>
</body>

<script>
    let params = (new URL(document.location)).searchParams;
    if (params.get("error") == "true") {
        alert("Oops! Invalid input. Please insert a postive whole number.");
    };
    if (params.get("error") == "true_not_enough_in_inventory") {
        alert("Oh no! Not enough in stock. Sorry for the inconvenience.");
    };
    if (params.get("error") == "true_no_items_were_selected") {
        alert("Silly Goose! Please select some items :)");
    };

</script>

</html>